define(["util"],function(t){return function(e){function a(){}function n(t,e){e=e||{id:a,className:a,tag:a,attribute:a};var n,r=[].slice.call(arguments,2);if(o=t.match(u))n="id",r.push(o[1]);else if(o=t.match(s))n="className",r.push(o[1]);else if(o=t.match(i))n="tag",r.push(o[0]);else if(o=t.match(l)){n="attribute";var c=o[1],f=o[2],g=o[4];r.push(c,f,g)}return e[n].apply(null,r)}function r(e,a){for(var u=e.pop(),s=[],i=0,l=a.length;i<l;i++){for(var c=a[i],o=c;o=o.parentNode;){var f={id:function(t,e){return t.id===e},className:function(e,a){return t.hasClass(e,a)},tag:function(t,e){return t.tagName.toLowerCase()===e},attribute:function(t,e,a,n){var r=!0;return e&&(r=f.tag(t,e)),r=r&&t.hasAttribute(a),n&&(r=r&&n===t.getAttribute(a)),r}},g=n(u,f,o);if(g)break}g&&s.push(c)}return e[0]&&s[0]?r(e,s):s}var u=/^#([\w_\-]+)/,s=/^\.([\w_\-]+)/,i=/^\w+$/i,l=/(\w+)?\[([^=\]]+)(?:=(["'])?([^\]"']+)\3?)?\]/,c=document,o=function(e,a){var u=n(e.pop(),{id:function(t){return[document.getElementById(t)]},className:function(e){var n=[];if(a.getElementsByClassName)n=a.getElementsByClassName(e);else for(var r=a.getElementsByTagName("*"),u=0,s=r.length;u<s;u++){var i=r[u];t.hasClass(i,e)&&n.push(i)}return n},tag:function(t){return a.getElementsByTagName(t)},attribute:function(t,e,n){for(var r=[],u=a.getElementsByTagName(t||"*"),s=0,i=u.length;s<i;s++){var l=u[s];n?l.getAttribute(e)===n&&r.push(l):l.hasAttribute(e)&&r.push(l)}return r}});return u=[].slice.call(u),e[0]&&u[0]?r(e,u):u}(e.split(/\s+/),c);return 0===o.length?null:1===o.length?o.pop():o}});
//# sourceMappingURL=selector.js.map
